{"version":3,"file":"main.bundle.js","sources":["../src/components/parts.vue","../src/components/point.vue","../src/main.js"],"sourcesContent":["<template>\n  <div class=\"parts-container\">\n    <div class=\"container-image\">\n      <div class=\"container-image__block\">\n        <input type=\"file\" id=\"spare-part-picture\" name=\"file\" v-model=\"file\" accept=\"image/*\" @change=\"sendFile\" v-if=\"!picture.src\">\n        <img :src=\"picture.src\" @click=\"setPoint\" v-else />\n        <input class=\"picture-remove\" type=\"submit\" value=\"x\" @click.prevent=\"removeFile\" v-if=\"picture.src\">\n      </div>\n      <div\n          v-for=\"element in points\"\n          :key=\"element.id\"\n          class=\"container-point\"\n          :style=\"getStyle(element.x, element.y)\"\n          v-html=\"element.id\"\n      >\n      </div>\n    </div>\n    <div class=\"parts-container__points\" v-if=\"picture.src && points.length > 0\">\n      <table>\n        <thead>\n        <th v-html=\"loc.POLUS_VUE_SPARE_PART_TABLE_HEADER_INDEX\"></th>\n        <th v-html=\"loc.POLUS_VUE_SPARE_PART_TABLE_HEADER_ELEMENT\"></th>\n        <th v-html=\"loc.POLUS_VUE_SPARE_PART_TABLE_HEADER_X\"></th>\n        <th v-html=\"loc.POLUS_VUE_SPARE_PART_TABLE_HEADER_Y\"></th>\n        <th></th>\n        <th></th>\n        </thead>\n        <tbody>\n          <point\n              v-for=\"element in points\"\n              :key=\"'spare-part-' + element.id\"\n              :id=\"element.id\"\n              :iblock-id=\"sparePartsIblockId\"\n              :coords=\"{x: element.x, y: element.y}\"\n              :allow-value=\"element.value\"\n              :error=\"element.error\"\n              :allow-indexes=\"indexes\"\n              @changeId=\"setPointId\"\n              @remove=\"removePoint\"\n          ></point>\n        </tbody>\n      </table>\n      <input type=\"submit\" @click.prevent=\"sendForm\" />\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport {Vue} from \"ui.vue\";\n\nexport default {\n  name: \"parts\",\n  data() {\n    return {\n      points: this.savedPoints,\n      indexes: [],\n      lastId: 0,\n      file: null,\n      fileUrl: 'polus:spareparts.spartfile.',\n      partsUrl: 'polus:spareparts.iblock.'\n    }\n  },\n  props: {\n    picture: {\n      type: Object,\n      default: function () {\n        return {\n          src: '',\n          id: 0\n        }\n      }\n    },\n    savedPoints: {\n      type: Array,\n      default: []\n    },\n    productIblockId: {\n      type: Number,\n      default: 0\n    },\n    sparePartsIblockId: {\n      type: Number,\n      default: 0\n    },\n    elementId: {\n      type: Number,\n      default: 0\n    },\n    rewriteIfRemove: {\n      type: Boolean,\n      default: true\n    }\n  },\n  mounted() {\n    for (let i in this.points) {\n      this.indexes.push(this.points[i].id);\n      if (parseInt(this.lastId) < parseInt(this.points[i].id)) {\n        this.lastId = parseInt(this.points[i].id);\n      }\n    }\n  },\n  computed: {\n    loc() {\n      return Vue.getFilteredPhrases(\"POLUS_VUE_\");\n    }\n  },\n  methods: {\n    /**\n     * Добавляет точку на схему\n     * @param event\n     */\n    setPoint(event) {\n      const x = event.offsetX - 10;\n      const y = event.offsetY - 10;\n\n      /**\n       * если привязать элемент инфоблока к точке, а после\n       * добавить новую точку, то несохраненные точки сбросят свои привязки\n       * к элементам инфоблока. Этот цикл позволяет этого избежать\n       */\n      for (let i in this.points) {\n        if (this.points[i].value.trim() === '') {\n          this.$set(this.points[i], 'value', this.getSparePartInputValue(this.points[i].id));\n        }\n      }\n\n      this.indexes.push(++this.lastId);\n      this.points.push({id: this.lastId, x: x, y: y, value: '', error: false});\n    },\n    /**\n     * Возвращает координаты точки на схеме\n     * @param x\n     * @param y\n     * @returns {string}\n     */\n    getStyle(x, y) {\n      return 'left:' + x + 'px;top:' + y + 'px;';\n    },\n    /**\n     * Возвращает идентификатор связанной запчасти по ее порядковому номеру/идентификатору\n     * @param id\n     * @returns {string|*}\n     */\n    getValue(id) {\n      let element = this.points.find(item => item.id === id);\n\n      if (element && element.hasOwnProperty('value')) {\n        return element.value;\n      }\n\n      return '';\n    },\n    /**\n     * Изменение порядкового номера/идентификатора запчасти\n     * @param value\n     */\n    setPointId(value) {\n      if (!value.hasOwnProperty(\"oldId\")) {\n        return;\n      }\n\n      let index = this.points.findIndex(item => item.id === value.oldId);\n      let indexIssetElement = this.points.findIndex(item => item.id === value.id);\n\n      if (indexIssetElement !== -1 || index === -1) {\n        return;\n      }\n\n      let indexFromSpecialArray = this.indexes.findIndex(item => item === value.oldId);\n\n      if (indexFromSpecialArray !== -1) {\n        this.$set(this.indexes, indexFromSpecialArray, index);\n      }\n\n      delete value.oldId;\n\n      value.x = this.points[index].x;\n      value.y = this.points[index].y;\n      value.value = this.points[index].value;\n\n      this.$set(this.points, index, value);\n\n    },\n    /**\n     * Удаление запчасти\n     * @param id\n     */\n    removePoint(id) {\n      const elementIndex = this.points.findIndex(item => item.id === id);\n      this.points.splice(elementIndex, 1);\n\n      if (this.rewriteIfRemove) {\n        for (let i in this.points) {\n\n          if (this.points[i].value.trim() === '') {\n            this.$set(this.points[i], 'value', this.getSparePartInputValue(this.points[i].id));\n          }\n\n          this.lastId = this.points[i].id = parseInt(i) + 1;\n        }\n      }\n    },\n    /**\n     * Сохранение файла со схемой запчастей\n     */\n    sendFile() {\n      let formSendAll = new FormData();\n      let file = document.getElementById('spare-part-picture').files[0];\n\n      if (!file) {\n        return;\n      }\n\n      formSendAll.append('file', file);\n      formSendAll.append('iblockId', this.productIblockId.toString());\n      formSendAll.append('elementId', this.elementId.toString());\n\n      this.$request\n          .setUrl(this.fileUrl + 'saveFile')\n          .setData(formSendAll)\n          .send()\n          .then(response => {\n            const {src, id} = response;\n\n            if (src && id) {\n              this.$set(this.picture, 'src', response.src);\n              this.$set(this.picture, 'id', response.id);\n            }\n\n          });\n    },\n    /**\n     * Удаление схемы запчастей\n     */\n    removeFile() {\n      this.$confirm\n          .setOkButtonName(this.loc.POLUS_VUE_REMOVE_BUTTON_OK)\n          .setTitle(this.loc.POLUS_VUE_REMOVE_SPARE_PARTS_TITLE)\n          .open(\n              this.loc.POLUS_VUE_REMOVE_SPARE_PARTS_CONFIRM,\n              {\n                onSuccess: this.removeFileSuccess,\n                onCancel: this.removeFileCancel\n              }\n          );\n    },\n    /**\n     * Обработчик подтверждения удаления схемы запчастей\n     */\n    removeFileSuccess() {\n      let fileFormData = new FormData();\n\n      fileFormData.append('fileId', this.picture.id)\n\n      this.$request\n          .setUrl(this.fileUrl + 'removeFile')\n          .setData(fileFormData)\n          .send()\n          .then(response => {\n            if (response === true) {\n              this.file = null;\n              this.$set(this.picture, 'src', '');\n              this.$set(this.picture, 'id', 0);\n              this.points.splice(0);\n              this.lastId = 0;\n\n              this.showSuccessMessage(this.loc.POLUS_VUE_FILE_SPARE_PART_REMOVE_SUCCESS);\n            }\n          });\n    },\n    /**\n     * Обработчик отмены удаления схемы запчастей\n     * @returns {boolean}\n     */\n    removeFileCancel() {\n      return false;\n    },\n    /**\n     * Отправляет форму с запчастями на сервер\n     * @returns {boolean}\n     */\n    sendForm() {\n      this.saveSparePartsToArray();\n\n      if (!this.isValid()) {\n        return false;\n      }\n\n      let formSendAll = new FormData();\n\n      let items = {};\n      for (let i in this.points) {\n        items[this.points[i].id] = this.points[i];\n      }\n\n      let parameters = {\n        items: JSON.stringify(items),\n        iblock_id: this.sparePartsIblockId,\n        element_id: this.elementId,\n        file: this.picture.src\n      };\n\n      formSendAll.append('parameters', JSON.stringify(parameters));\n\n      this.$request\n        .setUrl(this.partsUrl + 'saveSparePart')\n        .setData(formSendAll)\n        .send()\n        .then(response => {\n          if (response === true) {\n            this.showSuccessMessage(this.loc.POLUS_VUE_SAVE_SUCCESS);\n          } else {\n            this.showErrorMessage(this.loc.POLUS_VUE_SAVE_ERROR);\n          }\n        })\n        .catch(error => {\n          console.error(error);\n          this.showErrorMessage(this.loc.POLUS_VUE_SAVE_ERROR);\n        });\n    },\n    /**\n     * Проверяет заполнены ли все обязательные поля\n     * @returns {boolean}\n     */\n    isValid() {\n      for (let i in this.points) {\n        if (this.points[i].value.trim() === '') {\n\n          this.showErrorMessage(this.loc.POLUS_VUE_SEND_VALID_ERROR);\n\n          this.points[i].error = true;\n          return false;\n        }\n\n        this.points[i].error = false;\n      }\n\n      return true;\n    },\n    /**\n     * Сохранение значений запасных частей в массив\n     */\n    saveSparePartsToArray() {\n      for (let i in this.points) {\n        let value = this.getSparePartInputValue(this.points[i].id);\n        this.$set(this.points[i], 'value', value);\n      }\n    },\n    /**\n     * Возвращает идентификатор товара из поля запасных частей\n     * @param pointId\n     * @returns {*}\n     */\n    getSparePartInputValue(pointId) {\n      return document.getElementById('PROP[SPARE_PART][n' + pointId + ']').value;\n    },\n    /**\n     * Выводит сообщение об успешности операции\n     * @param message\n     */\n    showSuccessMessage(message) {\n      this.$notification\n          .setSuccess()\n          .open(message);\n    },\n    /**\n     * Выводит сообщение об ошибке\n     * @param message\n     */\n    showErrorMessage(message) {\n      this.$notification\n          .setError()\n          .open(message);\n    }\n  }\n}\n</script>","<template>\n    <tr class=\"element-point\">\n      <td><input :class=\"{'error': !elementId}\" size=\"3\" type=\"text\" name=\"'index'\" v-model=\"elementId\" @change=\"changeId\"></td>\n      <td><input\n          :class=\"{'error': !value}\"\n          :name=\"'PROP[SPARE_PART][n' + id + ']'\"\n          :id=\"'PROP[SPARE_PART][n' + id + ']'\"\n          size=\"3\"\n          type=\"text\"\n          ref=\"point\"\n          v-model=\"value\"\n          readonly\n      ></td>\n      <td><input size=\"3\" type=\"text\" name=\"'coords-x'\" readonly v-model=\"coords.x\"></td>\n      <td><input size=\"3\" type=\"text\" name=\"'coords-y'\" readonly v-model=\"coords.y\"></td>\n      <td><input type=\"button\" value=\"...\" @click.prevent=\"addElement\"></td>\n      <td><input type=\"button\" value=\"x\" @click.prevent=\"removeElement\"></td>\n    </tr>\n</template>\n\n<script>\nexport default {\n  name: \"point\",\n  data() {\n    return {\n      active: false,\n      value: this.allowValue,\n      elementId: this.id\n    }\n  },\n  props: {\n    id: {\n      type: [Number, String],\n      default: 0\n    },\n    iblockId: {\n      type: Number,\n      default: 0\n    },\n    allowValue: {\n      type: [Number, String],\n      default: ''\n    },\n    allowIndexes: {\n      type: Array,\n      default: []\n    },\n    error: {\n      type: Boolean,\n      default: false\n    },\n    coords: {\n      type: Object,\n      default: function() {\n        return {\n          x: '',\n          y: ''\n        };\n      }\n    }\n  },\n  watch: {\n    allowValue(val) {\n      this.value = val;\n    },\n    id(val) {\n      this.elementId = val;\n    }\n  },\n  methods: {\n    changeId() {\n      if (!this.elementId.match(/^\\d+$/)) {\n        this.elementId = this.id;\n        return;\n      }\n\n      const index = this.allowIndexes.findIndex(item => item === this.elementId);\n\n      if (index === -1) {\n        this.$emit('changeId', {id: this.elementId, oldId: this.id});\n      } else {\n        this.elementId = this.id;\n      }\n\n    },\n    addElement() {\n      jsUtils.OpenWindow('/bitrix/admin/iblock_element_search.php?lang=ru&IBLOCK_ID=' + this.iblockId + '&n=PROP[SPARE_PART]&k=n' + this.id + '&iblockfix=y', 900, 700);\n    },\n    removeElement() {\n      this.$emit('remove', this.id);\n    },\n    getElement() {\n      let element = document.getElementById('PROP[SPARE_PART][n' + this.id + ']');\n      return {id: this.elementId, x: this.coords.x, y: this.coords.y, value: element.value};\n    },\n    setActive(active) {\n      this.active = active;\n    }\n  }\n}\n</script>","import {Vue} from \"ui.vue\";\nimport Parts from \"./components/parts.vue\";\nimport Point from \"./components/point.vue\";\nimport \"polus.vue.plugins.request\";\nimport \"polus.vue.plugins.notification\";\nimport \"polus.vue.plugins.confirm\";\nimport \"./style.scss\";\n\nVue.component(\"Point\", Point);\nVue.component(\"Parts\", Parts);"],"names":["_vm","_c","staticClass","attrs","picture","on","name","rawName","value","file","expression","domProps","_v","$event","style","getStyle","_s","loc","POLUS_VUE_SPARE_PART_TABLE_HEADER_INDEX","POLUS_VUE_SPARE_PART_TABLE_HEADER_ELEMENT","POLUS_VUE_SPARE_PART_TABLE_HEADER_X","POLUS_VUE_SPARE_PART_TABLE_HEADER_Y","element","id","x","y","indexes","setPointId","preventDefault","_e","data","fileUrl","partsUrl","type","Object","default","src","savedPoints","productIblockId","Number","rewriteIfRemove","mounted","i","points","parseInt","computed","Vue","getFilteredPhrases","methods","setPoint","event","offsetX","$set","getSparePartInputValue","push","lastId","find","item","hasOwnProperty","indexFromSpecialArray","oldId","index","removePoint","elementIndex","findIndex","_this","document","getElementById","formSendAll","$request","setUrl","setData","response","removeFile","onSuccess","removeFileSuccess","onCancel","render","_h","elementId","class","directives","ref","target","composing","component","Point","Parts"],"mappings":"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"}